<!-- =============================================================================
     TEMPLATE: CALENDARIO DE TAREAS CON FULLCALENDAR
     =============================================================================
     Esta página muestra las tareas en un calendario interactivo usando FullCalendar
     ============================================================================= -->
{% extends "layout.html" %}

{% block title %}Calendario de Tareas{% endblock %}

{% block content %}
<section class="container mt-4">
  <header class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h1><i class="bi bi-calendar3 me-2"></i>Calendario de Tareas</h1>
      <p class="text-muted">Visualiza y gestiona tus tareas en el calendario</p>
    </div>
    <div>
      <a href="/" class="btn btn-outline-secondary me-2">
        <i class="bi bi-house me-1"></i>Inicio
      </a>
      <a href="/lista" class="btn btn-outline-secondary me-2">
        <i class="bi bi-list-ul me-1"></i>Vista Lista
      </a>
      <button class="btn btn-primary" onclick="abrirModalCrearEvento()">
        <i class="bi bi-plus-lg me-1"></i>Nueva Tarea
      </button>
    </div>
  </header>
  <!-- Calendario FullCalendar -->
  <div class="card">
    <div class="card-body">
      <div id="calendar"></div>
    </div>
  </div>
</section>
<!-- Modal para crear/editar eventos -->
<div class="modal fade" id="eventoModal" tabindex="-1" aria-labelledby="eventoModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="eventoModalLabel">Nueva Tarea</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="eventoForm">
          <input type="hidden" id="eventoId" name="id">
          <div class="mb-3">
            <label for="eventoNombre" class="form-label">Nombre de la tarea *</label>
            <input type="text" class="form-control" id="eventoNombre" name="nombre" required>
          </div>
          <div class="mb-3">
            <label for="eventoCategoria" class="form-label">Categoría *</label>
            <input type="text" class="form-control" id="eventoCategoria" name="categoria" required>
            <div class="form-text">Ejemplos: trabajo, personal, estudio, etc.</div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <div class="mb-3">
                <label for="eventoFechaInicio" class="form-label">Fecha de inicio</label>
                <input type="datetime-local" class="form-control" id="eventoFechaInicio" name="fecha_inicio">
              </div>
            </div>
            <div class="col-md-6">
              <div class="mb-3">
                <label for="eventoFechaLimite" class="form-label">Fecha límite</label>
                <input type="datetime-local" class="form-control" id="eventoFechaLimite" name="fecha_limite">
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <div class="mb-3">
                <label for="eventoPrioridad" class="form-label">Prioridad</label>
                <select class="form-select" id="eventoPrioridad" name="prioridad">
                  <option value="">Seleccionar...</option>
                  <option value="baja">Baja</option>
                  <option value="media">Media</option>
                  <option value="alta">Alta</option>
                </select>
              </div>
            </div>
            <div class="col-md-6">
              <div class="mb-3">
                <label for="eventoTiempoEstimado" class="form-label">Tiempo estimado (minutos)</label>
                <input type="number" class="form-control" id="eventoTiempoEstimado" name="tiempo_estimado" min="1">
              </div>
            </div>
          </div>
          <div class="mb-3">
            <label for="eventoEstado" class="form-label">Estado</label>
            <select class="form-select" id="eventoEstado" name="estado">
              <option value="pendiente">Pendiente</option>
              <option value="completada">Completada</option>
            </select>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-primary" onclick="guardarEvento()">Guardar Tarea</button>
      </div>
    </div>
  </div>
</div>
<!-- Modal de confirmación para eliminar -->
<div class="modal fade" id="eliminarModal" tabindex="-1" aria-labelledby="eliminarModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="eliminarModalLabel">Confirmar eliminación</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        ¿Estás seguro de que quieres eliminar esta tarea?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-danger" onclick="confirmarEliminacion()">Eliminar</button>
      </div>
    </div>
  </div>
</div>
<!-- Incluir FullCalendar CSS -->
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.css" rel="stylesheet">
<!-- Incluir FullCalendar JS -->
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js"></script>
<!-- Incluir archivo JavaScript del calendario -->
<script src="/static/calendario.js"></script>
{% endblock %}